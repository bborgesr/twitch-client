{"version":3,"file":"static/webpack/static/development/pages/channel.js.914dc552ec02d9b2c4ec.hot-update.js","sources":["webpack:///./pages/channel.js"],"sourcesContent":["import Layout from '../components/Splash.js'\nimport fetch from 'isomorphic-unfetch'\n\nexport default class Stream extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = { stream: props.stream }\n    this.fetchStream = this.fetchStream.bind(this)\n  }\n\n  static async getInitialProps(context) {\n    const { name } = context.query\n    const stream = await fetch(`https://api.twitch.tv/helix/streams?user_login=${name}`, {\n      headers: { \"Client-ID\": \"o3ldtpya38q9y4y5y6rg98gqycz3pt\" }\n    }).then(res => res.json())\n    return { name: name, stream: stream }\n  }\n\n  fetchStream() {\n    fetch(`https://api.twitch.tv/helix/streams?user_login=${this.props.name}`, {\n      headers: { \"Client-ID\": \"o3ldtpya38q9y4y5y6rg98gqycz3pt\" }\n    }).then(res => res.json())\n      .then(json => this.setState({ stream: json }))\n  }\n\n  componentDidMount() {\n    // Call the API every 5 seconds to keep the \"Live viewers\" output relatively live\n    this.timerID = setInterval(this.fetchStream, 5000)\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.timerID);\n  }\n\n  render() {\n    return (\n      <Layout>\n        <iframe src={`https://player.twitch.tv/?channel=${this.props.name.toLowerCase()}`}></iframe>\n        <p className=\"title\">{this.state.stream.data[0].title}</p>\n        <span>By: <span className=\"author\">{this.props.name}</span></span>\n        <span>Live viewers: <span className=\"viewers\">{this.state.stream.data[0].viewer_count}</span></span>\n      </Layout>\n    )\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAHA;AAIA;AACA;;;AASA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AADA;AAEA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;;;AAEA;AACA;AACA;AACA;;;AAEA;AACA;AACA;;;AAEA;AACA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAGA;;;;;;AAjCA;;;;;;AACA;;AACA;AACA;AAAA;AAAA;AADA;AAEA;AAAA;AACA;;AAHA;AAGA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;AAbA;AACA;AADA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}